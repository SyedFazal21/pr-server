const a0_0x49c189=a0_0x4395;(function(_0x319f81,_0x1d569d){const _0x564c94=a0_0x4395,_0x67803b=_0x319f81();while(!![]){try{const _0x1b7f9d=parseInt(_0x564c94(0x10b))/0x1*(-parseInt(_0x564c94(0xfe))/0x2)+-parseInt(_0x564c94(0x104))/0x3*(parseInt(_0x564c94(0x100))/0x4)+parseInt(_0x564c94(0xee))/0x5*(-parseInt(_0x564c94(0xf9))/0x6)+-parseInt(_0x564c94(0xf2))/0x7*(-parseInt(_0x564c94(0xec))/0x8)+parseInt(_0x564c94(0xe2))/0x9+-parseInt(_0x564c94(0xf1))/0xa*(-parseInt(_0x564c94(0x102))/0xb)+-parseInt(_0x564c94(0xe9))/0xc*(-parseInt(_0x564c94(0xed))/0xd);if(_0x1b7f9d===_0x1d569d)break;else _0x67803b['push'](_0x67803b['shift']());}catch(_0x35ee11){_0x67803b['push'](_0x67803b['shift']());}}}(a0_0x3bdb,0x50438));const express=require(a0_0x49c189(0xeb)),bcrypt=require(a0_0x49c189(0xde)),User=require(a0_0x49c189(0xf0)),axios=require(a0_0x49c189(0x108)),HttpsProxyAgent=require(a0_0x49c189(0xf5)),router=express[a0_0x49c189(0x105)]();router['post'](a0_0x49c189(0xfb),async(_0x8be2af,_0x41585a)=>{const _0x5cf498=a0_0x49c189;try{const {username:_0x4ad502,password:_0x5db140,oxylabsUsername:_0x52f9bd,oxylabsPassword:_0x521276}=_0x8be2af[_0x5cf498(0xdf)];if(!_0x4ad502||!_0x5db140)return _0x41585a[_0x5cf498(0xef)](0x190)['json']({'success':![],'message':_0x5cf498(0xf3)});const _0x322b5b=await User[_0x5cf498(0xe4)]({'username':_0x4ad502});if(_0x322b5b)return _0x41585a['status'](0x199)[_0x5cf498(0xea)]({'success':![],'message':_0x5cf498(0xf8)});try{const _0x17b43f=_0x5cf498(0xfd)+encodeURIComponent(_0x4ad502)+_0x5cf498(0x10a)+encodeURIComponent(_0x5db140),_0x577177=await axios[_0x5cf498(0x109)](_0x17b43f);if(_0x577177&&_0x577177['data']&&!_0x577177[_0x5cf498(0x107)][_0x5cf498(0xef)])return _0x41585a[_0x5cf498(0xef)](0x191)['json']({'success':![],'message':'User\x20not\x20registered\x20in\x20PR\x20solutions\x20contact\x20admin'});}catch(_0x1be7e5){return console[_0x5cf498(0xfa)](_0x5cf498(0xe6),_0x1be7e5),_0x41585a[_0x5cf498(0xef)](0x191)[_0x5cf498(0xea)]({'success':![],'message':_0x5cf498(0xe1)});}if(_0x52f9bd&&_0x521276){const _0x108998='us-pr.oxylabs.io:10000',[_0xdc6b4b,_0x4104cc]=_0x108998[_0x5cf498(0xf6)](':'),_0x5b2410=await getCurrentIp();if(!_0x5b2410)return _0x41585a['status'](0x1f4)[_0x5cf498(0xea)]({'success':![],'message':_0x5cf498(0xf7)});const _0x991e2d=await getProxyIp(_0xdc6b4b,_0x4104cc,_0x52f9bd,_0x521276);if(!_0x991e2d)return _0x41585a[_0x5cf498(0xef)](0x190)[_0x5cf498(0xea)]({'success':![],'message':_0x5cf498(0xe8)});_0x5b2410===_0x991e2d&&_0x41585a[_0x5cf498(0xef)](0x190)[_0x5cf498(0xea)]({'success':![],'message':_0x5cf498(0xe8)});}const _0x4837c8=await bcrypt[_0x5cf498(0xfc)](_0x5db140,0xa),_0x285579=new User({'username':_0x4ad502,'password':_0x4837c8,'oxylabsUsername':_0x52f9bd,'oxylabsPassword':_0x521276});await _0x285579[_0x5cf498(0x106)](),_0x41585a['json']({'success':!![]});}catch(_0x29f764){console['error'](_0x5cf498(0xe7),_0x29f764),_0x41585a[_0x5cf498(0xef)](0x1f4)[_0x5cf498(0xea)]({'success':![],'message':'Server\x20error.'});}}),router[a0_0x49c189(0xe0)]('/login',async(_0xe6f121,_0x1475ea)=>{const _0x235d62=a0_0x49c189;try{const {username:_0x307a00,password:_0x1b93a3}=_0xe6f121[_0x235d62(0xdf)],_0x225a7f=_0x235d62(0xfd)+encodeURIComponent(_0x307a00)+_0x235d62(0x10a)+encodeURIComponent(_0x1b93a3),_0x3b9981=await axios[_0x235d62(0x109)](_0x225a7f);if(_0x3b9981&&_0x3b9981[_0x235d62(0x107)]&&!_0x3b9981['data']['status'])return _0x1475ea[_0x235d62(0xef)](0x191)[_0x235d62(0xea)]({'success':![],'message':'User\x20not\x20registered\x20in\x20PR\x20solutions\x20contact\x20admin'});if(_0x3b9981[_0x235d62(0x107)]['oxylabUser']&&_0x3b9981[_0x235d62(0x107)][_0x235d62(0xe5)]){const _0x4489cb=_0x235d62(0xf4),[_0x37ca4a,_0x4e3dc0]=_0x4489cb[_0x235d62(0xf6)](':'),_0x7b0851=await getCurrentIp();if(!_0x7b0851)return _0x1475ea[_0x235d62(0xef)](0x1f4)[_0x235d62(0xea)]({'success':![],'message':'Failed\x20to\x20detect\x20IP\x20address'});const _0xdcfa4e=await getProxyIp(_0x37ca4a,_0x4e3dc0,oxylabsUsername,oxylabsPassword);if(!_0xdcfa4e)return _0x1475ea[_0x235d62(0xef)](0x190)['json']({'success':![],'message':_0x235d62(0xe8)});_0x7b0851===_0xdcfa4e&&_0x1475ea[_0x235d62(0xef)](0x190)[_0x235d62(0xea)]({'success':![],'message':_0x235d62(0xe8)});}else _0x1475ea[_0x235d62(0xef)](0x190)['json']({'success':![],'message':'Oxylabs\x20credentials\x20not\x20configured.'});return _0x1475ea[_0x235d62(0xea)]({'success':!![],'oxylabsUsername':_0x3b9981[_0x235d62(0x107)][_0x235d62(0x103)],'oxylabsPassword':_0x3b9981['data']['oxylabpass']});}catch(_0x245ece){return console['error'](_0x235d62(0xe6),_0x245ece),_0x1475ea[_0x235d62(0xef)](0x1f4)[_0x235d62(0xea)]({'success':![],'message':'External\x20credential\x20validation\x20failed'});}});async function getCurrentIp(){const _0x4caefd=a0_0x49c189;try{const _0x27fbf5=await axios[_0x4caefd(0x109)]('https://api.ipify.org?format=json',{'timeout':0x1388});return _0x27fbf5[_0x4caefd(0x107)]['ip'];}catch(_0x4ce8cb){return console[_0x4caefd(0xfa)](_0x4caefd(0xe3),_0x4ce8cb),null;}}async function getProxyIp(_0x3f5172,_0x194097,_0x68bdae,_0xa7496){const _0x595a4c=a0_0x49c189;try{const _0x327265=_0x595a4c(0x101)+_0x68bdae+':'+_0xa7496+'@'+_0x3f5172+':'+_0x194097,_0x326b4a=new HttpsProxyAgent(_0x327265),_0x5a556d=await axios['get']('https://api.ipify.org?format=json',{'httpsAgent':_0x326b4a,'timeout':0x2710});return _0x5a556d[_0x595a4c(0x107)]['ip'];}catch(_0x113608){return console[_0x595a4c(0xfa)]('Error\x20getting\x20proxy\x20IP:',_0x113608),null;}}module[a0_0x49c189(0xff)]=router;function a0_0x4395(_0x173e8b,_0x31b4e0){const _0x3bdba2=a0_0x3bdb();return a0_0x4395=function(_0x4395a0,_0x189195){_0x4395a0=_0x4395a0-0xde;let _0x31d070=_0x3bdba2[_0x4395a0];return _0x31d070;},a0_0x4395(_0x173e8b,_0x31b4e0);}function a0_0x3bdb(){const _0x5dfa6f=['Invalid\x20Oxylabs\x20credentials.','312Gafzuf','json','express','8HtWhno','190138kdGfJd','738380XFilPi','status','../models/User','130YyLPes','626955dmHXXg','All\x20fields\x20are\x20required.','us-pr.oxylabs.io:10000','https-proxy-agent','split','Failed\x20to\x20detect\x20IP\x20address','Username\x20already\x20exists.','12rzkuNc','error','/register','hash','https://sapivi.com/checkCredentails.php?username=','8XhjzLR','exports','866940xwJKhC','http://','23221aUPLHm','oxylabUser','6fTOYbK','Router','save','data','axios','get','&password=','1875cubnrQ','bcrypt','body','post','External\x20credential\x20validation\x20failed','5110182QNmZXq','Error\x20getting\x20original\x20IP:','findOne','oxylabpass','External\x20API\x20error:','Register\x20error:'];a0_0x3bdb=function(){return _0x5dfa6f;};return a0_0x3bdb();}