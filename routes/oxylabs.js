const a0_0x591721=a0_0x102b;(function(_0x345a62,_0xc62c30){const _0x182eb0=a0_0x102b,_0x51fa5a=_0x345a62();while(!![]){try{const _0x202079=parseInt(_0x182eb0(0xb0))/0x1+parseInt(_0x182eb0(0xa2))/0x2+-parseInt(_0x182eb0(0xbc))/0x3+parseInt(_0x182eb0(0xa1))/0x4+-parseInt(_0x182eb0(0xd1))/0x5*(parseInt(_0x182eb0(0xa5))/0x6)+parseInt(_0x182eb0(0xa9))/0x7+parseInt(_0x182eb0(0xd8))/0x8*(-parseInt(_0x182eb0(0xc7))/0x9);if(_0x202079===_0xc62c30)break;else _0x51fa5a['push'](_0x51fa5a['shift']());}catch(_0x29865a){_0x51fa5a['push'](_0x51fa5a['shift']());}}}(a0_0x110c,0x1cc68));function a0_0x102b(_0x9998b5,_0x2e939f){const _0x110ce9=a0_0x110c();return a0_0x102b=function(_0x102b17,_0x33d150){_0x102b17=_0x102b17-0x9d;let _0x41a24b=_0x110ce9[_0x102b17];return _0x41a24b;},a0_0x102b(_0x9998b5,_0x2e939f);}function a0_0x110c(){const _0x5ed8b4=['de-pr.oxylabs.io','333248pbckOj','266204XpgUOl','az-pr.oxylabs.io','axios','6MSxfzc','/user-info','tw-pr.oxylabs.io','kz-pr.oxylabs.io','1270556qxqrFC','th-pr.oxylabs.io','status','id-pr.oxylabs.io','Failed\x20to\x20fetch\x20user\x20info:\x20','nl-pr.oxylabs.io','message','101301PPJIdv','tr-pr.oxylabs.io','ca-pr.oxylabs.io','https://api.myip.com','https://api.ipify.org?format=json','pt-pr.oxylabs.io','jp-pr.oxylabs.io','express','pl-pr.oxylabs.io','http://ip-api.com/json/','ae-pr.oxylabs.io','be-pr.oxylabs.io','494148PgksFM','https-proxy-agent','Error\x20getting\x20original\x20IP:','post','br-pr.oxylabs.io','data','sg-pr.oxylabs.io','hk-pr.oxylabs.io','json','us-pr.oxylabs.io','se-pr.oxylabs.io','70164sbuksK','cn-pr.oxylabs.io','Missing\x20credentials','au-pr.oxylabs.io','../models/User','us-pr.oxylabs.io:10000','http://','Error\x20getting\x20proxy\x20IP:','body','floor','615455AqrpKz','my-pr.oxylabs.io','error','exports','mx-pr.oxylabs.io','es-pr.oxylabs.io','il-pr.oxylabs.io','96ipUAqT','Failed\x20to\x20detect\x20original\x20IP\x20address','pk-pr.oxylabs.io','pe-pr.oxylabs.io','ar-pr.oxylabs.io','Unsupported\x20or\x20invalid\x20country\x20code','ua-pr.oxylabs.io','get','in-pr.oxylabs.io','kr-pr.oxylabs.io','random'];a0_0x110c=function(){return _0x5ed8b4;};return a0_0x110c();}const express=require(a0_0x591721(0xb7)),axios=require(a0_0x591721(0xa4)),HttpsProxyAgent=require(a0_0x591721(0xbd)),User=require(a0_0x591721(0xcb)),router=express['Router']();router[a0_0x591721(0xbf)]('/validate-oxylabs',async(_0x453108,_0x105262)=>{const _0x316286=a0_0x591721,{oxylabsUsername:_0x4c548e,oxylabsPassword:_0x2b1303}=_0x453108[_0x316286(0xcf)];if(!_0x4c548e||!_0x2b1303)return _0x105262['json']({'valid':![],'message':_0x316286(0xc9)});const _0x4fc084=_0x316286(0xcc),[_0x3c4ccd,_0x394f15]=_0x4fc084['split'](':');if(!_0x3c4ccd||!_0x394f15||isNaN(_0x394f15))return _0x105262[_0x316286(0xab)](0x190)[_0x316286(0xc4)]({'valid':![],'error':'Invalid\x20country\x20format.\x20Expected\x20format:\x20\x22host:port\x22'});const _0x5ef7c6=await getCurrentIp();if(!_0x5ef7c6)return _0x105262[_0x316286(0xab)](0x1f4)['json']({'valid':![],'error':_0x316286(0xd9)});const _0x51043f=await getProxyIp(_0x3c4ccd,_0x394f15,_0x4c548e,_0x2b1303);if(!_0x51043f)return _0x105262[_0x316286(0xab)](0x191)[_0x316286(0xc4)]({'valid':![],'error':'Failed\x20to\x20connect\x20through\x20proxy.\x20Invalid\x20credentials\x20or\x20proxy\x20server\x20unavailable.'});const _0x3b20f8=_0x5ef7c6!==_0x51043f;return _0x3b20f8?_0x105262[_0x316286(0xc4)]({'valid':!![]}):_0x105262[_0x316286(0xc4)]({'valid':![],'message':'Invalid\x20oxylabs\x20credentials'});}),router[a0_0x591721(0xdf)](a0_0x591721(0xa6),async(_0x3c9dbb,_0x8b4ee7)=>{const _0x3ab094=a0_0x591721;try{const _0x4ed25a=await fetch(_0x3ab094(0xb9));data=await _0x4ed25a['json']();if(!data||!data['ip']){const _0x43cfcf=await fetch('https://api.ipify.org?format=json');data=await _0x43cfcf[_0x3ab094(0xc4)]();}if(!data||!data['ip']){const _0x24e475=await fetch(_0x3ab094(0xb3));data=await _0x24e475['json']();}if(data&&data['ip']){const {query:_0x2b5229,country:_0x13bb2e,city:_0x2b714a,regionName:_0x235a50}=_0x4ed25a[_0x3ab094(0xc1)];return _0x8b4ee7[_0x3ab094(0xc4)]({'ip':_0x2b5229,'country':_0x13bb2e,'city':_0x2b714a,'region':_0x235a50});}else return _0x8b4ee7[_0x3ab094(0xc4)]({'error':'Failed\x20to\x20fetch\x20user\x20info'});}catch(_0x5bd36d){return _0x8b4ee7['json']({'error':_0x3ab094(0xad)+_0x5bd36d[_0x3ab094(0xaf)]});}});async function getCurrentIp(){const _0x1da572=a0_0x591721;try{const _0x2c5497=await axios[_0x1da572(0xdf)](_0x1da572(0xb4),{'timeout':0x1388});return _0x2c5497[_0x1da572(0xc1)]['ip'];}catch(_0xe7e36f){return console['error'](_0x1da572(0xbe),_0xe7e36f),null;}}async function getProxyIp(_0x4c5f30,_0x21bbec,_0x19e652,_0x532fc6){const _0x37c6e4=a0_0x591721;try{const _0x2eec2a=_0x37c6e4(0xcd)+_0x19e652+':'+_0x532fc6+'@'+_0x4c5f30+':'+_0x21bbec,_0x5ac89f=new HttpsProxyAgent(_0x2eec2a),_0x2ca4f6=await axios['get'](_0x37c6e4(0xb4),{'httpsAgent':_0x5ac89f,'timeout':0x2710});return _0x2ca4f6[_0x37c6e4(0xc1)]['ip'];}catch(_0x32367f){return console[_0x37c6e4(0xd3)](_0x37c6e4(0xce),_0x32367f),null;}}const countryPortRanges={'us':{'host':a0_0x591721(0xc5),'min':0x2711,'max':0x4e1f},'ca':{'host':a0_0x591721(0xb2),'min':0x7531,'max':0x9c3f},'gb':{'host':'gb-pr.oxylabs.io','min':0x4e21,'max':0x752f},'de':{'host':a0_0x591721(0xa0),'min':0x7531,'max':0x9c3f},'fr':{'host':'fr-pr.oxylabs.io','min':0x9c41,'max':0xc34f},'es':{'host':a0_0x591721(0xd6),'min':0x2711,'max':0x4e1f},'it':{'host':'it-pr.oxylabs.io','min':0x4e21,'max':0x752f},'se':{'host':a0_0x591721(0xc6),'min':0x7531,'max':0x9c3f},'gr':{'host':'gr-pr.oxylabs.io','min':0x9c41,'max':0xc34f},'pt':{'host':a0_0x591721(0xb5),'min':0x2711,'max':0x4e1f},'nl':{'host':a0_0x591721(0xae),'min':0x4e21,'max':0x752f},'be':{'host':a0_0x591721(0xbb),'min':0x7531,'max':0x9c3f},'ru':{'host':'ru-pr.oxylabs.io','min':0x9c41,'max':0xc34f},'ua':{'host':a0_0x591721(0xde),'min':0x2711,'max':0x4e1f},'pl':{'host':a0_0x591721(0xb8),'min':0x4e21,'max':0x752f},'il':{'host':a0_0x591721(0xd7),'min':0x4e21,'max':0x752f},'tr':{'host':a0_0x591721(0xb1),'min':0x7531,'max':0x9c3f},'au':{'host':a0_0x591721(0xca),'min':0x9c41,'max':0xc34f},'my':{'host':a0_0x591721(0xd2),'min':0x2711,'max':0x4e1f},'th':{'host':a0_0x591721(0xaa),'min':0x4e21,'max':0x752f},'kr':{'host':a0_0x591721(0x9e),'min':0x7531,'max':0x9c3f},'jp':{'host':a0_0x591721(0xb6),'min':0x9c41,'max':0xc34f},'ph':{'host':'ph-pr.oxylabs.io','min':0x2711,'max':0x4e1f},'sg':{'host':a0_0x591721(0xc2),'min':0x4e21,'max':0x752f},'cn':{'host':a0_0x591721(0xc8),'min':0x7531,'max':0x9c3f},'hk':{'host':a0_0x591721(0xc3),'min':0x9c41,'max':0xc34f},'tw':{'host':a0_0x591721(0xa7),'min':0x2711,'max':0x4e1f},'in':{'host':a0_0x591721(0x9d),'min':0x4e21,'max':0x752f},'pk':{'host':a0_0x591721(0xda),'min':0x7531,'max':0x9c3f},'id':{'host':a0_0x591721(0xac),'min':0x2711,'max':0x4e1f},'ir':{'host':'ir-pr.oxylabs.io','min':0x2711,'max':0x4e1f},'az':{'host':a0_0x591721(0xa3),'min':0x4e21,'max':0x752f},'ae':{'host':a0_0x591721(0xba),'min':0x7531,'max':0x9c3f},'kz':{'host':a0_0x591721(0xa8),'min':0x9c41,'max':0xc34f},'mx':{'host':a0_0x591721(0xd5),'min':0x2711,'max':0x4e1f},'br':{'host':a0_0x591721(0xc0),'min':0x4e21,'max':0x752f},'ar':{'host':a0_0x591721(0xdc),'min':0x7531,'max':0x9c3f},'cl':{'host':'cl-pr.oxylabs.io','min':0x9c41,'max':0xc34f},'pe':{'host':a0_0x591721(0xdb),'min':0x2711,'max':0x4e1f}};router[a0_0x591721(0xbf)]('/rotate-oxylabs-ip',async(_0x5cf37f,_0x330ccd)=>{const _0x52de94=a0_0x591721,{oxylabsUsername:_0x46092f,oxylabsPassword:_0x38a2e6,country:_0x321beb}=_0x5cf37f[_0x52de94(0xcf)];if(!_0x46092f||!_0x38a2e6||!_0x321beb)return _0x330ccd[_0x52de94(0xab)](0x190)[_0x52de94(0xc4)]({'success':![],'message':'Missing\x20required\x20fields'});const _0x68deca=_0x321beb['match'](/^([a-z]{2})-pr\.oxylabs\.io/),_0x161856=_0x68deca?_0x68deca[0x1]:null;if(!_0x161856||!countryPortRanges[_0x161856])return _0x330ccd['status'](0x190)[_0x52de94(0xc4)]({'success':![],'message':_0x52de94(0xdd)});const {host:_0x1a1a36,min:_0x5809c4,max:_0x3eda74}=countryPortRanges[_0x161856],_0x266d90=Math[_0x52de94(0xd0)](Math[_0x52de94(0x9f)]()*(_0x3eda74-_0x5809c4+0x1))+_0x5809c4,_0x3ef0c3=_0x1a1a36+':'+_0x266d90;let _0x31bc96=null;try{_0x31bc96=await getProxyIp(_0x1a1a36,_0x266d90,_0x46092f,_0x38a2e6);}catch(_0x2f79a4){}return _0x330ccd[_0x52de94(0xc4)]({'success':!![],'proxy':_0x3ef0c3,'ip':_0x31bc96});}),module[a0_0x591721(0xd4)]=router;